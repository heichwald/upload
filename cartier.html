<html>
<head>
<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
<style>.blink{-webkit-animation:blink .75s linear infinite;-moz-animation:blink .75s linear infinite;-ms-animation:blink .75s linear infinite;-o-animation:blink .75s linear infinite;animation:blink .75s linear infinite}@-webkit-keyframes blink{0%{opacity:1}50%{opacity:1}50.01%{opacity:0}100%{opacity:0}}@-moz-keyframes blink{0%{opacity:1}50%{opacity:1}50.01%{opacity:0}100%{opacity:0}}@-ms-keyframes blink{0%{opacity:1}50%{opacity:1}50.01%{opacity:0}100%{opacity:0}}@-o-keyframes blink{0%{opacity:1}50%{opacity:1}50.01%{opacity:0}100%{opacity:0}}@keyframes blink{0%{opacity:1}50%{opacity:1}50.01%{opacity:0}100%{opacity:0}}.button-success,.button-warning,.button-secondary{color:white;border-radius:4px;text-shadow:0 1px 1px rgba(0,0,0,0.2)}.button-success{background:#1cb841}.button-warning{background:#b94a48}.button-secondary{background:#42b8dd}input[type=text]{width:60px;margin-right:10px;text-align:center}input[type=radio]{margin-left:5px;margin-right:13px}input[id=cm]{margin-right:55px}body{margin-left:7px}#buttons{width:550px;text-align:center;border-top:1px solid gray;border-bottom:1px solid gray;padding:8px 0 8px 0;margin-top:7px}.add-remove-text{width:190px;display:inline-block}#extra-jump-rings{margin-right:82px}#measurement-unit-text{display:inline-block;width:68px}</style>
</head>
<body>
<div id="container" style="height:100%;width:100%">
<svg width="100" height="140" style="position:absolute;top:96px">
<circle id="pendant-circle" cx="50" cy="50" r="47" stroke="black" stroke-width="7" fill="#6c0b0b"></circle>
</svg>
<svg width="100%" height="140" xmlns="http://www.w3.org/2000/svg" version="1.1">
<text class="length-text" id="measurement-top" x="500" y="35" fill="#6c0b0b">8</text>
<line x1="50px" x2="50" y1="40" y2="75" stroke="#6c0b0b" stroke-width="3" stroke-linecap="round"></line>
<line id="measurement-top-line" x1="50px" x2="940" y1="50" y2="50" stroke="#6c0b0b" stroke-width="3" stroke-linecap="round" stroke-dasharray="10, 12"></line>
<line id="measurement-top-line-stopper" x1="940px" x2="940" y1="40" y2="75" stroke="#6c0b0b" stroke-width="3" stroke-linecap="round"></line>
<line id="clasp-line" x1="50px" x2="900" y1="100" y2="100" stroke="black" stroke-width="7" stroke-linecap="round"></line>
</svg>
<img id="clasp" width="65" src="lobster_clasp.png" style="position:absolute;top:81px;left:904px;z-index:10">
<svg id="jump-line-container-svg" height="140" width="100%">
<line id="jump-ring-line" x1="50px" x2="940" y1="53" y2="53" stroke="black" stroke-width="7" stroke-linecap="round"></line>
<line x1="50px" x2="50" y1="70" y2="130" stroke="#6c0b0b" stroke-width="3" stroke-linecap="round"></line>
<line id="measurement-bottom-line" x1="50px" x2="940" y1="120" y2="120" stroke="#6c0b0b" stroke-width="3" stroke-linecap="round" stroke-dasharray="10, 12"></line>
<line id="measurement-bottom-line-stopper" x1="940px" x2="940" y1="70" y2="130" stroke="#6c0b0b" stroke-width="3" stroke-linecap="round"></line>
<text class="length-text" id="measurement-bottom" x="500" y="140" fill="#6c0b0b">8</text>
<svg id="jump-ring-fixed">
<circle id="jump-ring-fixed-circle" class="jump-ring-circle" cx="940" cy="53" r="12" stroke="black" stroke-width="4" fill="white"></circle>
</svg>
</svg>
<br/><br/><br/>
<h2>Initial condition</h2>
<form class="pure-form pure-form-aligned">
<label for="length-box">Size</label>
<input class="length-text" id="length-box" type="text" value="16" />
inches<input id="inches" name="measurement-unit" type="radio" checked="checked"/>
cm<input id="cm" name="measurement-unit" type="radio" />
<label for="number-jump-rings">Number of jump rings</label>
<input id="number-jump-rings" type="text" value="1"/>
<br/>
<div id="buttons">
<button id="validate-initial-condition" class="button-success pure-button">Validate</button>
<button id="refresh-page" class="button-warning pure-button">Reset</button>
</div>
<h2>Service requested</h2>
<label class="add-remove-text" for="extra-length-box">Length to add/remove</label>
<input class="length-text" id="extra-length-box" type="text" value="0" disabled="disabled"/>
<span id="measurement-unit-text">inches</span>
Add <input id="chain-new-length-add" name="chain-new-length" type="radio" value="Add" checked="checked"/>
Remove <input id="chain-new-length-remove" name="chain-new-length" type="radio" value="Remove"/><br/><br/>
<label class="add-remove-text" for="extra-jump-rings">Jump rings to add/remove</label>
<input id="extra-jump-rings" type="text" value="0" disabled="disabled"/>
Add <input id="extra-jump-rings-add" name="new-number-jump-rings" type="radio" value="Add" checked="checked"/>
Remove <input id="extra-jump-rings-remove" name="new-number-jump-rings" type="radio" value="Remove"/>
</form>
</div>
</body>
<script>/*<![CDATA[*/var lineLength=890;var jrElements=[];var flagJRFixed=flagClasp=false;var lastPosClasp;var lastPosJRFixed;function ratio(){var b=parseFloat(document.getElementById("length-box").value);var c=parseFloat(document.getElementById("extra-length-box").value);var a=document.getElementById("chain-new-length-add").checked?b+c:b-c;return a/(2*lineLength)}function moveIt(p){var n=document.getElementById("clasp");n.style.left=parseInt(n.style.left)-p;var g=document.getElementById("measurement-top-line");var u=g.getAttribute("x2")-p;g.setAttribute("x2",u);var a=document.getElementById("measurement-top-line-stopper");a.setAttribute("x1",u);a.setAttribute("x2",u);var c=document.getElementById("measurement-top");c.innerHTML=(ratio()*(u-50)).toFixed(2);var j=u/2+25;c.setAttribute("x",j);var r=document.getElementById("clasp-line");var m=r.getAttribute("x2")-p;r.setAttribute("x2",m);var w=document.getElementById("jump-ring-line");var s=parseInt(w.getAttribute("x2"))+p;w.setAttribute("x2",s);var v=document.getElementById("measurement-bottom-line");var f=parseInt(v.getAttribute("x2"))+p;v.setAttribute("x2",f);var t=document.getElementById("measurement-bottom-line-stopper");t.setAttribute("x1",f);t.setAttribute("x2",f);var h=document.getElementById("measurement-bottom");h.innerHTML=(ratio()*(f-50)).toFixed(2);var o=f/2+25;h.setAttribute("x",o);document.getElementById("container").style.width=Math.max(s,m)+200;var q=document.querySelectorAll(".jump-ring-circle");for(i=0;i<q.length;++i){var b=q[i];b.setAttribute("cx",parseInt(b.getAttribute("cx"))+p)}var e=document.querySelectorAll(".inner-measurements-line");for(i=0;i<e.length;++i){var k=e[i];k.setAttribute("x1",parseInt(k.getAttribute("x1"))+p);k.setAttribute("x2",parseInt(k.getAttribute("x2"))+p)}var d=document.querySelectorAll(".inner-measurements-text");for(i=0;i<d.length;++i){var l=d[i];l.setAttribute("x",parseInt(l.getAttribute("x"))+p)}}function changeNumberRings(){var d=1/ratio();var g=document.querySelectorAll(".jump-ring-circle");var m=Array.prototype.slice.call(g,0);m.sort(function(p,o){if(parseInt(p.getAttribute("cx"))<parseInt(o.getAttribute("cx"))){return -1}if(parseInt(p.getAttribute("cx"))>parseInt(o.getAttribute("cx"))){return 1}return 0});var c=m[0].getAttribute("cx");var n=parseInt(document.getElementById("extra-jump-rings").value);if(document.getElementById("extra-jump-rings-remove").checked){n*=-1}var k=parseInt(document.getElementById("number-jump-rings").value)+n-g.length;var a=document.getElementById("jump-line-container-svg");for(var e=0;e<k;++e){var b=document.createElementNS("http://www.w3.org/2000/svg","circle");b.setAttribute("class","jump-ring-circle");b.setAttribute("cx",c-d);b.setAttribute("cy","53");b.setAttribute("r","12");b.setAttribute("stroke","black");b.setAttribute("stroke-width","4");b.setAttribute("fill","white");var j=e+g.length-1;b.setAttribute("data-pos",j);a.appendChild(b);var l=document.createElementNS("http://www.w3.org/2000/svg","line");l.setAttribute("class","inner-measurements-line");l.setAttribute("x1",c-d+5);l.setAttribute("x2",c);l.setAttribute("y1",80);l.setAttribute("y2",80);l.setAttribute("stroke","#6c0b0b");l.setAttribute("stroke-width","3");l.setAttribute("stroke-linecap","round");l.setAttribute("stroke-dasharray","10, 12");a.appendChild(l);var h=document.createElementNS("http://www.w3.org/2000/svg","line");h.setAttribute("class","inner-measurements-line");h.setAttribute("x1",c-d);h.setAttribute("x2",c-d);h.setAttribute("y1",70);h.setAttribute("y2",90);h.setAttribute("stroke","#6c0b0b");h.setAttribute("stroke-width","3");h.setAttribute("stroke-linecap","round");a.appendChild(h);var f=document.createElementNS("http://www.w3.org/2000/svg","text");f.setAttribute("class","inner-measurements-text");f.setAttribute("x",c-d/2);f.setAttribute("y",95);f.setAttribute("fill","#6c0b0b");f.innerHTML=1;a.appendChild(f);c-=d;jrElements[j]=b;b.isActive=false;b.measurements={horizontal:l,vertical:h,text:f};b.onclick=function(o){o.stopPropagation();this.isActive=!this.isActive}}for(var e=0;e<-k;++e){m[e].measurements.horizontal.remove();m[e].measurements.vertical.remove();m[e].measurements.text.remove();m[e].reinnerHTMLmove();jrElements.splice(jrElements.length-1,1)}}function blink(a){a.classList.add("blink");setTimeout(function(){a.classList.remove("blink")},1500)}function updateInnerTexts(){for(var c=0;c<jrElements.length;c++){var a=jrElements[c].measurements;var d=a.horizontal;var b=parseInt(d.getAttribute("x2"))-parseInt(d.getAttribute("x1"));a.text.innerHTML=(ratio()*b).toFixed(2);blink(a.text)}}function updateInnerMeasurements(d){for(var b=0;b<jrElements.length;b++){if(jrElements[b].isActive){var c=(b>0)?parseInt(jrElements[b-1].getAttribute("cx")):parseInt(document.getElementById("jump-ring-line").getAttribute("x2"));var a=(b<jrElements.length-1)?parseInt(jrElements[b+1].getAttribute("cx")):50;if(d.pageX<=c&&d.pageX>=a){jrElements[b].measurements.horizontal.setAttribute("x1",d.pageX);jrElements[b].measurements.vertical.setAttribute("x1",d.pageX);jrElements[b].measurements.vertical.setAttribute("x2",d.pageX);jrElements[b].measurements.text.setAttribute("x",d.pageX+(c-d.pageX)/2);jrElements[b].measurements.text.innerHTML=(ratio()*(c-d.pageX)).toFixed(2);jrElements[b].setAttribute("cx",d.pageX);if(b<jrElements.length-1){jrElements[b+1].measurements.horizontal.setAttribute("x2",d.pageX);jrElements[b+1].measurements.text.setAttribute("x",d.pageX-(d.pageX-a)/2);jrElements[b+1].measurements.text.innerHTML=(ratio()*(d.pageX-a)).toFixed(2)}}}}}function updateSizes(c){moveIt(0);var b=document.getElementById("measurement-top");var a=document.getElementById("measurement-bottom");blink(b);blink(a);updateInnerTexts()}document.getElementById("number-jump-rings").onchange=changeNumberRings;document.getElementById("extra-jump-rings").onchange=changeNumberRings;document.getElementById("extra-jump-rings-add").onchange=changeNumberRings;document.getElementById("extra-jump-rings-remove").onchange=changeNumberRings;document.getElementById("container").onclick=function(){flagJRFixed=flagClasp=false;for(var a=0;a<jrElements.length;a++){jrElements[a].isActive=false}};document.getElementById("clasp").onclick=function(a){a.stopPropagation();flagClasp=!flagClasp};document.getElementById("jump-ring-fixed-circle").onclick=function(a){a.stopPropagation();flagJRFixed=!flagJRFixed};document.getElementById("container").onmousemove=function(b){updateInnerMeasurements(b);if(flagClasp&&b.pageX>=150){if(!lastPosClasp){lastPosClasp=b.pageX}var a=lastPosClasp-b.pageX;lastPosClasp=b.pageX;moveIt(a);lastPosJRFixed=parseInt(document.getElementById("jump-ring-fixed-circle")+b.pageX)}if(flagJRFixed&&b.pageX>=150){if(!lastPosJRFixed){lastPosJRFixed=b.pageX}var a=lastPosJRFixed-b.pageX;lastPosJRFixed=b.pageX;moveIt(-a);lastPosClasp=parseInt(document.getElementById("clasp")+b.pageX)}};function updateMeasurementsInTextBoxes(c){var a=document.querySelectorAll(".length-text");for(var b=0;b<a.length;b++){a[b].value=(a[b].value*c).toFixed(1)}}document.getElementById("length-box").onchange=updateSizes;document.getElementById("extra-length-box").onchange=updateSizes;document.getElementById("chain-new-length-add").onchange=updateSizes;document.getElementById("chain-new-length-remove").onchange=updateSizes;document.getElementById("inches").onchange=function(){if(this.checked){updateMeasurementsInTextBoxes(1/2.54);updateSizes();document.getElementById("measurement-unit-text").innerHTML="inches"}};document.getElementById("cm").onchange=function(){if(this.checked){updateMeasurementsInTextBoxes(2.54);updateSizes();document.getElementById("measurement-unit-text").innerHTML="cm"}};document.getElementById("validate-initial-condition").onclick=function(c){c.preventDefault();var a=document.querySelectorAll("input");for(var b=0;b<a.length;b++){a[b].removeAttribute("disabled")}return false};document.getElementById("refresh-page").onclick=function(a){a.preventDefault();location.reload();return false};/*]]>*/</script>
</html>
